{
    "sourceFile": "rasbet/src/components/AdminPage.vue",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1642538007582,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1642538007582,
            "name": "Commit-0",
            "content": "<template>\r\n  <v-row>\r\n    <v-col class=\"mb-6\" cols=\"9\">\r\n      <v-container class=\"betsContainer\">\r\n        <div  class=\"mb-5\" style=\"margin-left: 0px\">\r\n          <v-btn\r\n            class=\"fontSports\"\r\n            :class=\"selectedbtn == 'Todos' ? 'selectedbtn-row' : 'btn-row'\"\r\n            @click=\"() => goto('Todos')\"\r\n            >Todos</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            class=\"fontSports\"\r\n            :class=\"selectedbtn == 'Futebol' ? 'selectedbtn-row' : 'btn-row'\"\r\n            @click=\"() => goto('Futebol')\"\r\n            >Futebol</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            class=\"fontSports\"\r\n            :class=\"\r\n              selectedbtn == 'Basquetebol' ? 'selectedbtn-row' : 'btn-row'\r\n            \"\r\n            @click=\"() => goto('Basquetebol')\"\r\n            >Basquetebol</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            class=\"fontSports\"\r\n            :class=\"selectedbtn == 'Ténis' ? 'selectedbtn-row' : 'btn-row'\"\r\n            @click=\"() => goto('Ténis')\"\r\n            >Tenis</v-btn\r\n          >\r\n\r\n          <v-btn\r\n            class=\"fontSports\"\r\n            :class=\"selectedbtn == 'formula_1' ? 'selectedbtn-row' : 'btn-row'\"\r\n            @click=\"() => goto('formula_1')\"\r\n            >Formula 1</v-btn\r\n          >\r\n        </div>\r\n        <div>\r\n          <!-- Search -->\r\n          <v-text-field\r\n            v-model=\"search\"\r\n            label=\"Pesquisar\"\r\n            single-line\r\n            hide-details\r\n            outlined\r\n            background-color=\"white\"\r\n            prepend-inner-icon=\"mdi-magnify\"\r\n            @keyup.enter.native=\"search\"\r\n            class=\"mb-5\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <!-- Cards -->\r\n          <BetCard\r\n            class=\"my-5\"\r\n            v-for=\"(game, index) in slicedGames\"\r\n            :key=\"index\"\r\n            v-bind:game=\"game\"\r\n            v-bind:selectResult=\"selectOddAndGame\"\r\n          />\r\n        </div>\r\n        <div class=\"text-center\">\r\n          <v-pagination\r\n            color=\"#063606\"\r\n            v-model=\"page\"\r\n            :length=\"maxPage\"\r\n          ></v-pagination>\r\n        </div>\r\n      </v-container>\r\n    </v-col>\r\n    <v-col cols=\"3\" class=\"boletimSection\">\r\n      <p class=\"bHeader\">BOLETIM</p>\r\n      <v-container>\r\n        <Boletim\r\n          v-for=\"(selection,index) in selected\"\r\n          :key=\"index\"\r\n          v-bind:selection=\"selection\"\r\n          v-bind:removeBet=\"removeBet\"\r\n          v-bind:index=\"index\"\r\n        />\r\n      </v-container>\r\n      <hr style=\"margin-bottom:10px\" />\r\n      <div>\r\n      <v-row>\r\n          <v-col cols=\"6 text-left\" style=\"padding-bottom: 0px\">\r\n            <p>Odd Total:</p>\r\n          </v-col>\r\n          <v-col cols=\"6\" style=\"align-center; padding-bottom: 0px;\">\r\n            <p>{{parseFloat(this.totalOdd)}}</p>\r\n          </v-col>\r\n        </v-row>\r\n      <v-row style=\"padding-bottom: 3px; \" >\r\n          <v-col cols=\"6 text-left\">Montante:</v-col>\r\n          <v-col cols=\"6\" style=\"padding-top: 0px\">\r\n            <v-text-field\r\n              v-model=\"montante\"\r\n              style=\"color=black !important; height: 30px;padding-top: 0px;width: 190px;\"\r\n              prepend-icon=\"mdi-currency-eur\"\r\n              type=\"number\"\r\n            ></v-text-field>\r\n          </v-col>\r\n        </v-row>\r\n        <v-row>\r\n          <v-col cols=\"6 text-left\" style=\"padding-bottom: 0px\">\r\n            <p>Total de Ganhos:</p>\r\n          </v-col>\r\n          <v-col cols=\"6\" style=\"align-center; padding-bottom: 0px;\">\r\n            <p v-if=\"this.montante!=0\">{{parseFloat(this.totalOdd)*parseFloat(this.montante)}}€</p>\r\n          </v-col>\r\n        </v-row>\r\n        \r\n        <v-row style=\"justify-content: center; margin-bottom: 12px;\">\r\n          <v-btn class=\"btnAposta\" @click=\"registerBoletim\">Aposta Já!</v-btn>\r\n        </v-row>\r\n      </div>\r\n    </v-col>\r\n  </v-row>\r\n</template>\r\n\r\n<script>\r\nimport BetCard from \"./BetCard.vue\";\r\nimport Boletim from \"./Boletim.vue\";\r\nimport Axios from \"axios\";\r\nconst dataAPI = require(\"@/config/host\").dataAPI;\r\n\r\nexport default {\r\n  name: \"Home\",\r\n  components: {\r\n    BetCard,\r\n    Boletim,\r\n  },\r\n  data: () => ({\r\n    search: \"\",\r\n    page: 1,\r\n    maxPage: 1,\r\n    selected: [],\r\n    totalOdd: 0,\r\n    choice: null,\r\n    type: \"\",\r\n    games: null,\r\n    montante:0,\r\n    slicedGames: null,\r\n    selectedbtn: null,\r\n    originalGames: [],\r\n  }),\r\n  methods: {\r\n    removeBet(index){\r\n            this.selected.splice(index, 1);\r\n\r\n            this.totalOdd = parseFloat(this.totalOdd)/ parseFloat(this.selected.odd);\r\n            this.totalOdd=this.totalOdd.toFixed(2);\r\n        },\r\n    async getGames() {\r\n      var response = await Axios.get(dataAPI + \"jogo/getAllJogos\");\r\n      console.log(response.data);\r\n      for (var i in response.data) {\r\n        this.originalGames.push(response.data[i]);\r\n        //console.log(response.data[i])\r\n      }\r\n    },\r\n    goto: function (sport) {\r\n      this.selectedbtn = sport;\r\n      if (sport == \"Todos\") this.type = \"\";\r\n      else this.type = sport;\r\n    },\r\n    async registerBoletim() {\r\n      var oddSum = this.selected.reduce((a, b) => a * (b[\"odd\"] || 1), 1);\r\n      var boletim = {};\r\n      boletim.idApostador = 1; // MUDAR ISTO QUANDO TIVER LOGIN\r\n      boletim.oddSum = oddSum;\r\n      boletim.quantia = this.montante; // MUDAR ISTO PARA UM VALOR DO TEST FIELD\r\n      boletim.Aposta = this.selected;\r\n      await Axios.post(dataAPI + \"boletim/createBoletim\", boletim);\r\n      for (var i in this.selection) {\r\n        console.log(this.selection[i]);\r\n      }\r\n    },\r\n    selectOddAndGame(idGame, gameName, idteam, name, odd, idPartida) {\r\n      this.selected.push({\r\n        idGame: idGame,\r\n        gameName: gameName,\r\n        idteam: idteam,\r\n        name: name,\r\n        odd: odd,\r\n        idPartida: idPartida,\r\n      });\r\n      //add odd to this.totalOdd converting it to an integer; \r\n      if (this.totalOdd ==0) this.totalOdd = 1;\r\n      this.totalOdd = parseFloat(this.totalOdd) * parseFloat(odd);\r\n      this.totalOdd=this.totalOdd.toFixed(2);\r\n    },\r\n    searchFunc: () => {\r\n      if (this.search == \"\" || this.search == null) {\r\n        if (this.type == \"\") this.games = this.originalGames;\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) => game.type == this.type\r\n          );\r\n      } else {\r\n        if (this.type == \"\")\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n              game.team2.toLowerCase().includes(this.search.toLowerCase())\r\n          );\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.type == this.type &&\r\n              (game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n                game.team2.toLowerCase().includes(this.search.toLowerCase()))\r\n          );\r\n      }\r\n      this.slicedGames = this.games.slice(\r\n        (this.page - 1) * 5,\r\n        (this.page - 1) * 5 + 5\r\n      );\r\n    },\r\n  },\r\n  watch: {\r\n    search: function () {\r\n      if (this.search == \"\" || this.search == null) {\r\n        if (this.type == \"\") this.games = this.originalGames;\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) => game.type == this.type\r\n          );\r\n      } else {\r\n        if (this.type == \"\")\r\n          this.games = this.originalGames.filter((game) =>\r\n            game.name.toLowerCase().includes(this.search.toLowerCase())\r\n          );\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.type == this.type &&\r\n              game.name.toLowerCase().includes(this.search.toLowerCase())\r\n          );\r\n      }\r\n      this.slicedGames = this.games.slice(\r\n        (this.page - 1) * 5,\r\n        (this.page - 1) * 5 + 5\r\n      );\r\n    },\r\n    page: function () {\r\n      if (this.search == \"\" || this.search == null) {\r\n        if (this.type == \"\") this.games = this.originalGames;\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) => game.type == this.type\r\n          );\r\n      } else {\r\n        if (this.type == \"\")\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n              game.team2.toLowerCase().includes(this.search.toLowerCase())\r\n          );\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.type == this.type &&\r\n              (game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n                game.team2.toLowerCase().includes(this.search.toLowerCase()))\r\n          );\r\n      }\r\n      this.slicedGames = this.games.slice(\r\n        (this.page - 1) * 5,\r\n        (this.page - 1) * 5 + 5\r\n      );\r\n    },\r\n    type: function () {\r\n      if (this.search == \"\" || this.search == null) {\r\n        if (this.type == \"\") this.games = this.originalGames;\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) => game.type == this.type\r\n          );\r\n      } else {\r\n        if (this.type == \"\")\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n              game.team2.toLowerCase().includes(this.search.toLowerCase())\r\n          );\r\n        else\r\n          this.games = this.originalGames.filter(\r\n            (game) =>\r\n              game.type == this.type &&\r\n              (game.team1.toLowerCase().includes(this.search.toLowerCase()) ||\r\n                game.team2.toLowerCase().includes(this.search.toLowerCase()))\r\n          );\r\n      }\r\n      this.page = 1;\r\n      this.slicedGames = this.games.slice(\r\n        (this.page - 1) * 5,\r\n        (this.page - 1) * 5 + 5\r\n      );\r\n    },\r\n  },\r\n  created: async function () {\r\n    await this.getGames();\r\n    this.type = \"\";\r\n    this.maxPage =\r\n      Math.floor(this.originalGames.length / 5) +\r\n      (this.originalGames.length % 5 == 0 ? 0 : 1);\r\n    if (this.type == \"\") this.games = this.originalGames;\r\n    else\r\n      this.games = this.originalGames.filter((game) => game.type == this.type);\r\n\r\n    this.slicedGames = this.games.slice((this.page - 1) * 5, this.page * 5);\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.homepage {\r\n  margin-top: 20vh;\r\n}\r\n\r\n.boletimSection {\r\n  border: solid #063606;\r\n  margin-bottom: 12vh;\r\n  background-color: white !important;\r\n  margin-top: 12vh;\r\n  text-align: center;\r\n  border-radius: 15px;\r\n}\r\n\r\n.betsContainer {\r\n  padding-top: 10vh;\r\n}\r\n\r\n.bHeader {\r\n  font-size: 1.5vw;\r\n  font-weight: bold;\r\n  color: #063606;\r\n}\r\n\r\n.theme--light.v-card > .v-card__text,\r\n.theme--light.v-card > .v-card__subtitle {\r\n  color: black;\r\n}\r\n\r\n.fontSports {\r\n  font-family: \"Bebas Neue\", cursive;\r\n  font-size: 16px !important;\r\n  padding-right: 40px !important;\r\n  padding-left: 40px !important;\r\n  margin-right: 25px !important;\r\n}\r\n.btn-row {\r\n  border-style: solid !important;\r\n  border-color: #063606 !important;\r\n  background-color: white !important;\r\n  color: #063606 !important;\r\n}\r\n.selectedbtn-row {\r\n  background-color: #063606 !important;\r\n  color: white !important;\r\n}\r\n\r\n.btnAposta{\r\n  border-style: solid !important;\r\n  border-color: rgb(218, 165, 32) !important;\r\n  background-color: rgb(218, 165, 32) !important;\r\n  color: white !important;\r\n}\r\n</style>\r\n"
        }
    ]
}